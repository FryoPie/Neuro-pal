:root{--bg-primary: #F8F6FF;--bg-secondary: #FFFFFF;--bg-tertiary: #F0F4F8;--text-primary: #2D3748;--text-secondary: #4A5568;--text-muted: #718096;--border-color: #E2E8F0;--shadow-light: rgba(102, 126, 234, .08);--shadow-medium: rgba(102, 126, 234, .15);--lavender: #B19CD9;--lavender-light: #D6C9E8;--teal: #4FD1C7;--teal-light: #81E6D9;--pastel-blue: #90CDF4;--pastel-blue-light: #BEE3F8;--cream: #FFFBF0;--soft-pink: #FBB6CE;--soft-green: #9AE6B4;--gradient-primary: linear-gradient(135deg, var(--lavender), var(--teal));--gradient-secondary: linear-gradient(135deg, var(--soft-pink), var(--lavender-light));--gradient-calm: linear-gradient(135deg, var(--pastel-blue), var(--teal-light))}[data-theme=dark]{--bg-primary: #1A202C;--bg-secondary: #2D3748;--bg-tertiary: #4A5568;--text-primary: #F7FAFC;--text-secondary: #E2E8F0;--text-muted: #A0AEC0;--border-color: #4A5568;--shadow-light: rgba(0, 0, 0, .2);--shadow-medium: rgba(0, 0, 0, .3);--lavender: #9F7AEA;--lavender-light: #B794F6;--teal: #38B2AC;--teal-light: #4FD1C7;--pastel-blue: #63B3ED;--pastel-blue-light: #90CDF4;--cream: #2D3748;--soft-pink: #ED64A6;--soft-green: #68D391}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:var(--bg-primary);min-height:100vh;color:var(--text-primary);transition:background-color .3s ease,color .3s ease;overflow-x:hidden}.app{max-width:420px;margin:0 auto;min-height:100vh;background:var(--bg-secondary);box-shadow:0 0 40px var(--shadow-light);transition:all .3s ease;display:flex;flex-direction:column}.app-header{background:var(--gradient-secondary);padding:1.5rem 1.25rem 1rem;color:#fff;position:relative;flex-shrink:0}.header-content{display:flex;justify-content:space-between;align-items:flex-start}.app-header h1{font-size:1.75rem;font-weight:600;margin-bottom:.25rem;text-shadow:0 2px 8px rgba(0,0,0,.1)}.app-header p{font-size:.9rem;opacity:.95;font-weight:400}.theme-toggle{background:#fff3;border:2px solid rgba(255,255,255,.3);border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.theme-toggle:hover{background:#ffffff4d;transform:scale(1.05)}.tab-navigation{display:flex;background:var(--bg-tertiary);border-bottom:1px solid var(--border-color);flex-shrink:0}.tab-button{flex:1;padding:.75rem .5rem;border:none;background:transparent;font-size:.75rem;font-weight:500;color:var(--text-muted);cursor:pointer;transition:all .3s ease;border-bottom:3px solid transparent;font-family:Poppins,sans-serif}.tab-button:hover{background:var(--bg-secondary);color:var(--text-secondary);transform:translateY(-1px)}.tab-button.active{color:var(--lavender);border-bottom-color:var(--lavender);background:var(--bg-secondary)}.app-content{padding:1rem;flex:1;overflow-y:auto;max-height:calc(100vh - 140px)}.api-status{font-size:.75rem;padding:.25rem .75rem;border-radius:12px;margin-top:.5rem;text-align:center;font-weight:500}.api-status.connected{background:#9ae6b433;color:var(--soft-green);border:1px solid var(--soft-green)}.api-status.no-key,.api-status.error{background:#ffd33d33;color:#d69e2e;border:1px solid #d69e2e}.fallback-notice{font-size:.8rem!important;color:var(--text-muted)!important;margin-top:.5rem!important}.error-message{background:#ff6b6b1a;border:1px solid rgba(255,107,107,.3);color:var(--text-primary);padding:.75rem;border-radius:10px;margin-top:.5rem;font-size:.85rem;text-align:center}.chat-input:disabled{opacity:.7;cursor:not-allowed}.chat-actions{display:flex;gap:.5rem;align-items:flex-end}.chat-actions button:disabled{opacity:.5;cursor:not-allowed;transform:none}.clear-button{background:var(--text-muted);border:none;border-radius:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1rem;cursor:pointer;transition:all .3s ease}.clear-button:hover:not(:disabled){background:var(--text-secondary);transform:scale(1.05)}.character-count{font-size:.75rem;color:var(--text-muted);text-align:right;margin-top:.25rem}.message-time{font-size:.7rem;color:var(--text-muted);opacity:.7;display:block;margin-top:.25rem}.chat-message.user .message-time{color:#fffc}.typing-message{display:flex;align-items:center;gap:.5rem}.typing-text{font-size:.8rem;color:var(--text-muted);font-style:italic}[data-theme=dark] .api-status.connected{background:#68d39133;color:var(--soft-green)}[data-theme=dark] .api-status.no-key,[data-theme=dark] .api-status.error{background:#ed893633;color:#ed8936;border-color:#ed8936}[data-theme=dark] .error-message{background:#ff6b6b26;border-color:#ff6b6b66}.calendar-view{max-width:100%}.calendar-header{text-align:center;margin-bottom:1.25rem}.calendar-header h2{color:var(--text-primary);margin-bottom:.25rem;font-size:1.3rem;font-weight:600}.calendar-header p{color:var(--text-muted);font-size:.85rem;margin-bottom:1rem}.week-navigation{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-bottom:1rem}.week-nav-button{background:var(--lavender);color:#fff;border:none;padding:.5rem .75rem;border-radius:10px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif}.week-nav-button:hover:not(:disabled){background:var(--lavender-light);transform:translateY(-1px)}.week-nav-button:disabled{opacity:.5;cursor:not-allowed}.current-week{font-weight:600;color:var(--text-primary);font-size:.9rem}.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:.375rem;margin-bottom:1.25rem}.calendar-day{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:10px;padding:.5rem .375rem;min-height:85px;display:flex;flex-direction:column;transition:all .3s ease}.calendar-day.today{border-color:var(--lavender);box-shadow:0 2px 8px var(--shadow-light)}.calendar-day.has-data{border-color:var(--teal)}.day-header{text-align:center;margin-bottom:.375rem}.day-name{display:block;font-size:.65rem;font-weight:600;color:var(--text-muted);text-transform:uppercase}.day-date{display:block;font-size:.75rem;color:var(--text-secondary);font-weight:500}.day-data{flex:1;display:flex;flex-direction:column;align-items:center;gap:.2rem}.mood-indicator{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1rem;box-shadow:0 2px 4px #0000001a}.energy-indicator{width:20px;height:20px;border-radius:5px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.7rem;font-weight:600;box-shadow:0 1px 3px #0003}.reflection-indicator{font-size:.8rem;opacity:.8}.no-data{flex:1;display:flex;align-items:center;justify-content:center}.today-marker{font-size:.65rem;color:var(--lavender);font-weight:600;text-transform:uppercase}.weekly-insights{background:var(--bg-tertiary);border-radius:14px;padding:1rem;margin-bottom:1.25rem;border:1px solid var(--border-color)}.weekly-insights h3{color:var(--text-primary);margin-bottom:.75rem;font-size:1.1rem;font-weight:600}.insights-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:.75rem;margin-bottom:1rem}.insight-card{background:var(--bg-secondary);border-radius:10px;padding:.75rem;text-align:center;border:1px solid var(--border-color)}.insight-card h4{color:var(--text-muted);font-size:.7rem;font-weight:500;margin-bottom:.375rem;text-transform:uppercase}.insight-value{display:flex;align-items:center;justify-content:center;gap:.375rem}.mood-large{font-size:1.75rem}.energy-large{font-size:1.3rem;font-weight:600;color:var(--teal)}.trend{font-size:1rem}.trend.increasing{color:var(--soft-green)}.trend.decreasing{color:#ff6b6b}.data-count{font-size:1.3rem;font-weight:600;color:var(--lavender)}.data-label{font-size:.7rem;color:var(--text-muted)}.patterns-section{margin-top:1rem}.patterns-section h4{color:var(--text-primary);margin-bottom:.75rem;font-size:.95rem;font-weight:600}.pattern-card{background:var(--bg-secondary);border-radius:10px;padding:.75rem;margin-bottom:.5rem;border:1px solid var(--border-color)}.pattern-message{color:var(--text-primary);font-size:.85rem;margin-bottom:.375rem;line-height:1.3}.pattern-suggestion{color:var(--text-secondary);font-size:.8rem;line-height:1.3}.calendar-actions{text-align:center;margin-bottom:1.25rem}.therapist-report-button{background:var(--gradient-primary);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:20px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif;box-shadow:0 4px 15px var(--shadow-medium);margin-bottom:.5rem}.therapist-report-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px var(--shadow-medium)}.therapist-report-button:disabled{opacity:.5;cursor:not-allowed}.report-description{color:var(--text-muted);font-size:.8rem;line-height:1.3;max-width:280px;margin:0 auto}.calendar-legend{background:var(--bg-tertiary);border-radius:10px;padding:.75rem;border:1px solid var(--border-color)}.calendar-legend h4{color:var(--text-primary);margin-bottom:.5rem;font-size:.85rem;font-weight:600}.legend-items{display:flex;flex-direction:column;gap:.375rem}.legend-item{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:var(--text-secondary)}.legend-color{width:14px;height:14px;border-radius:3px}.mood-legend{background:linear-gradient(45deg,#ffd93d,#ff69b4,#6bb6ff)}.energy-legend{background:linear-gradient(45deg,#ff6b6b,#ffd93d,#4fd1c7)}.legend-icon{font-size:.9rem}.routine-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.routine-tab h2{color:var(--text-primary);font-size:1.3rem;font-weight:600}.streak-counter{display:flex;align-items:center;gap:.375rem;background:var(--gradient-primary);color:#fff;padding:.375rem .75rem;border-radius:16px;font-size:.8rem;font-weight:500}.streak-flame{font-size:1rem}.progress-section{margin-bottom:1.25rem}.progress-bar{width:100%;height:8px;background:var(--bg-tertiary);border-radius:16px;overflow:hidden;margin:.75rem 0;box-shadow:inset 0 2px 4px var(--shadow-light)}.progress-fill{height:100%;background:var(--gradient-primary);border-radius:16px;transition:width .6s cubic-bezier(.4,0,.2,1);position:relative}.progress-fill:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:shimmer 2s infinite}@keyframes shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.progress-text{font-size:.85rem;color:var(--text-muted);text-align:center;font-weight:500}.tasks-container{display:flex;flex-direction:column;gap:.5rem}.task-card{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:14px;padding:1rem;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;box-shadow:0 2px 8px var(--shadow-light)}.task-card:hover{border-color:var(--lavender);transform:translateY(-2px);box-shadow:0 8px 25px var(--shadow-medium)}.task-card.completed{background:var(--bg-tertiary);border-color:var(--soft-green);box-shadow:0 2px 8px #9ae6b433}.task-label{display:flex;align-items:center;cursor:pointer;font-size:.95rem;font-weight:500}.task-checkbox{display:none}.checkmark{width:22px;height:22px;border:2px solid var(--border-color);border-radius:7px;margin-right:.75rem;display:flex;align-items:center;justify-content:center;transition:all .3s ease;background:var(--bg-secondary)}.task-checkbox:checked+.checkmark{background:var(--soft-green);border-color:var(--soft-green);transform:scale(1.1)}.task-checkbox:checked+.checkmark:after{content:"✓";color:#fff;font-weight:700;font-size:.8rem}.task-text{flex:1;transition:all .3s ease;color:var(--text-primary)}.task-card.completed .task-text{text-decoration:line-through;color:var(--text-muted)}.completion-icon{font-size:1.2rem;margin-left:.375rem;animation:sparkle .6s ease-in-out}@keyframes sparkle{0%,to{transform:scale(1) rotate(0)}50%{transform:scale(1.2) rotate(180deg)}}.celebration{background:var(--gradient-secondary);color:#fff;padding:1.25rem;border-radius:14px;text-align:center;font-weight:600;font-size:1rem;margin-top:1rem;animation:celebrate .6s cubic-bezier(.68,-.55,.265,1.55);box-shadow:0 8px 25px var(--shadow-medium)}@keyframes celebrate{0%{transform:scale(.8) translateY(20px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}.energy-tracker{margin-top:1.25rem;padding:1rem;background:var(--bg-tertiary);border-radius:14px;border:1px solid var(--border-color)}.energy-tracker h3{color:var(--text-primary);margin-bottom:.375rem;font-size:1.1rem;font-weight:600}.energy-subtitle{color:var(--text-muted);font-size:.8rem;margin-bottom:.75rem}.energy-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:.375rem;margin-bottom:.75rem}.energy-button{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:10px;padding:.5rem .375rem;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;gap:.2rem;font-size:.75rem}.energy-button:hover{transform:translateY(-2px);border-color:var(--lavender)}.energy-button.active{background:var(--lavender);border-color:var(--lavender);color:#fff}.energy-emoji{font-size:1.1rem}.current-energy{text-align:center;padding:.75rem;background:var(--bg-secondary);border-radius:10px;border:1px solid var(--border-color)}.energy-display{font-weight:600;color:var(--lavender)}.energy-description{font-size:.8rem;color:var(--text-muted);margin-top:.375rem}.sensory-checkin{margin-top:1.25rem;padding:1rem;background:var(--bg-tertiary);border-radius:14px;border:1px solid var(--border-color)}.sensory-checkin h3{color:var(--text-primary);margin-bottom:.375rem;font-size:1.1rem;font-weight:600}.sensory-subtitle{color:var(--text-muted);font-size:.8rem;margin-bottom:.75rem}.sensory-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem;margin-bottom:.75rem}.sensory-button{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:10px;padding:.75rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;font-size:.8rem}.sensory-button:hover{transform:translateY(-1px);border-color:var(--teal)}.sensory-button.active{background:var(--teal);border-color:var(--teal);color:#fff}.sensory-emoji{font-size:1.1rem}.sensory-tips{background:var(--bg-secondary);padding:.75rem;border-radius:10px;border:1px solid var(--border-color)}.sensory-tips h4{color:var(--text-primary);margin-bottom:.5rem;font-size:.95rem}.sensory-tip{display:flex;align-items:center;gap:.5rem;margin-bottom:.375rem;font-size:.8rem;color:var(--text-secondary)}.tip-emoji{font-size:.9rem}.mood-reflection{margin-top:1.25rem;padding:1rem;background:var(--bg-tertiary);border-radius:14px;border:1px solid var(--border-color)}.mood-reflection h3{color:var(--text-primary);margin-bottom:.5rem;font-size:1.1rem;font-weight:600}.reflection-prompt{color:var(--text-secondary);font-size:.85rem;margin-bottom:.75rem;font-style:italic}.reflection-input{width:100%;padding:.75rem;border:2px solid var(--border-color);border-radius:10px;background:var(--bg-secondary);color:var(--text-primary);font-family:Poppins,sans-serif;font-size:.85rem;resize:vertical;transition:border-color .3s ease;min-height:80px}.reflection-input:focus{outline:none;border-color:var(--lavender)}.reflection-acknowledgment{margin-top:.75rem;padding:.75rem;background:var(--bg-secondary);border-radius:10px;border:1px solid var(--soft-green);color:var(--text-secondary);font-size:.8rem}.compassionate-chat{max-width:100%}.chat-header{text-align:center;margin-bottom:1rem}.chat-header h2{color:var(--text-primary);margin-bottom:.375rem;font-size:1.3rem;font-weight:600}.chat-header p{color:var(--text-muted);font-size:.85rem}.chat-container{background:var(--bg-tertiary);border-radius:14px;padding:.75rem;min-height:350px;display:flex;flex-direction:column}.chat-welcome{flex:1;display:flex;align-items:center;justify-content:center}.welcome-message{text-align:center;color:var(--text-secondary);line-height:1.5}.welcome-message p{margin-bottom:.75rem;font-size:.85rem}.chat-messages{flex:1;display:flex;flex-direction:column;gap:.75rem;margin-bottom:.75rem;max-height:250px;overflow-y:auto}.chat-message{display:flex}.chat-message.user{justify-content:flex-end}.chat-message.bot{justify-content:flex-start}.message-content{max-width:80%;padding:.75rem;border-radius:14px;font-size:.85rem;line-height:1.4}.chat-message.user .message-content{background:var(--lavender);color:#fff;border-bottom-right-radius:4px}.chat-message.bot .message-content{background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color);border-bottom-left-radius:4px}.typing-indicator{display:flex;gap:.2rem;align-items:center}.typing-indicator span{width:6px;height:6px;border-radius:50%;background:var(--text-muted);animation:typing 1.4s infinite ease-in-out}.typing-indicator span:nth-child(2){animation-delay:.2s}.typing-indicator span:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,to{transform:translateY(0)}30%{transform:translateY(-8px)}}.chat-input-container{display:flex;gap:.5rem;align-items:flex-end}.chat-input{flex:1;padding:.5rem;border:2px solid var(--border-color);border-radius:10px;background:var(--bg-secondary);color:var(--text-primary);font-family:Poppins,sans-serif;font-size:.85rem;resize:none;transition:border-color .3s ease;min-height:40px}.chat-input:focus{outline:none;border-color:var(--lavender)}.send-button{background:var(--lavender);border:none;border-radius:10px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;cursor:pointer;transition:all .3s ease}.send-button:hover:not(:disabled){background:var(--lavender-light);transform:scale(1.05)}.send-button:disabled{opacity:.5;cursor:not-allowed}.transition-helper{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .3s ease}.transition-content{background:var(--bg-secondary);padding:1.5rem;border-radius:16px;text-align:center;max-width:280px;margin:1rem;box-shadow:0 10px 30px var(--shadow-medium)}.transition-icon{font-size:2.5rem;margin-bottom:.75rem}.transition-content h3{color:var(--text-primary);margin-bottom:.75rem;font-size:1.2rem}.transition-content p{color:var(--text-secondary);margin-bottom:.5rem;line-height:1.4;font-size:.9rem}.next-task{font-weight:600}.next-task span{color:var(--lavender)}.transition-countdown{font-size:.8rem;color:var(--text-muted);margin-bottom:1rem}.transition-close{background:var(--gradient-primary);color:#fff;border:none;padding:.5rem 1rem;border-radius:20px;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif}.transition-close:hover{transform:translateY(-2px);box-shadow:0 4px 15px var(--shadow-medium)}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.mood-tab h2{color:var(--text-primary);margin-bottom:1rem;font-size:1.3rem;font-weight:600;text-align:center}.mood-entry{margin-bottom:1.25rem}.mood-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem}.mood-button{background:var(--bg-secondary);border:2px solid var(--border-color);border-radius:14px;padding:1rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;align-items:center;gap:.5rem;box-shadow:0 2px 8px var(--shadow-light);position:relative;overflow:hidden}.mood-button:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--mood-color-light, var(--lavender-light));opacity:0;transition:opacity .3s ease}.mood-button:hover{transform:translateY(-3px);box-shadow:0 8px 25px var(--shadow-medium);border-color:var(--mood-color, var(--lavender))}.mood-button:hover:before{opacity:.1}.mood-button.active{border-color:var(--mood-color, var(--lavender));background:var(--mood-color, var(--lavender));color:#fff;transform:scale(1.05)}.mood-emoji{font-size:2.2rem;position:relative;z-index:1}.mood-label{font-size:.85rem;font-weight:500;position:relative;z-index:1}.current-mood{background:var(--bg-tertiary);padding:1rem;border-radius:14px;text-align:center;margin-bottom:1rem;border:1px solid var(--border-color)}.mood-display{font-size:1.6rem;margin-left:.375rem}.mood-history h3{color:var(--text-primary);margin-bottom:.75rem;font-size:1.1rem;font-weight:600}.mood-timeline{display:flex;flex-direction:column;gap:.5rem}.mood-entry{display:flex;align-items:center;justify-content:space-between;background:var(--bg-secondary);padding:.75rem 1rem;border-radius:10px;border:1px solid var(--border-color);box-shadow:0 2px 4px var(--shadow-light)}.mood-time{font-size:.8rem;color:var(--text-muted);font-weight:500}.calm-tab{text-align:center}.calm-tab h2{color:var(--text-primary);margin-bottom:1.25rem;font-size:1.3rem;font-weight:600}.breathing-section{margin-bottom:1.25rem}.breathing-circle{position:relative;width:160px;height:160px;margin:0 auto .75rem;display:flex;align-items:center;justify-content:center}.breathing-animation{width:120px;height:120px;border-radius:50%;background:var(--gradient-calm);animation:breathe 4s ease-in-out infinite;opacity:.9;box-shadow:0 0 30px var(--shadow-medium)}@keyframes breathe{0%,to{transform:scale(1)}50%{transform:scale(1.15)}}.breathing-text{position:absolute;color:var(--text-primary);font-weight:500;font-size:.9rem}.quote-section{margin-bottom:1.25rem}.motivational-quote{background:var(--gradient-secondary);color:#fff;padding:1.25rem;border-radius:14px;font-size:1rem;font-weight:500;line-height:1.5;border:none;font-style:italic;box-shadow:0 8px 25px var(--shadow-medium)}.sound-section{margin-top:1.25rem}.sound-button{background:var(--gradient-primary);color:#fff;border:none;padding:1rem 2rem;border-radius:25px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);margin-bottom:.75rem;font-family:Poppins,sans-serif;box-shadow:0 4px 15px var(--shadow-medium)}.sound-button:hover{transform:translateY(-2px);box-shadow:0 8px 25px var(--shadow-medium)}.sound-button.playing{background:var(--gradient-calm)}.sound-status{color:var(--teal);font-weight:500;font-size:.85rem;animation:pulse 2s ease-in-out infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.7}}.calm-header{margin-bottom:1rem}.back-button{background:var(--bg-tertiary);border:2px solid var(--border-color);color:var(--text-primary);padding:.5rem 1rem;border-radius:10px;font-size:.85rem;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif}.back-button:hover{border-color:var(--lavender);transform:translateY(-1px)}.tools-invitation{margin-top:2rem;padding:1.5rem;background:var(--bg-tertiary);border-radius:16px;border:1px solid var(--border-color)}.invitation-content h3{color:var(--text-primary);margin-bottom:.75rem;font-size:1.1rem;font-weight:600}.invitation-content p{color:var(--text-secondary);margin-bottom:1rem;line-height:1.5;font-size:.9rem}.tools-button{background:var(--gradient-primary);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:20px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif;margin-bottom:.5rem}.tools-button:hover{transform:translateY(-2px);box-shadow:0 4px 15px var(--shadow-medium)}.invitation-note{color:var(--text-muted);font-size:.8rem;font-style:italic}.calm-tools{max-width:100%}.tools-intro{text-align:center;margin-bottom:2rem}.tools-intro h3{color:var(--text-primary);margin-bottom:.5rem;font-size:1.3rem;font-weight:600}.tools-intro p{color:var(--text-muted);font-size:.9rem;line-height:1.5}.tool-categories{display:flex;flex-direction:column;gap:1.5rem}.tool-category{background:var(--bg-tertiary);padding:1.25rem;border-radius:16px;border:1px solid var(--border-color)}.tool-category h4{color:var(--text-primary);margin-bottom:.5rem;font-size:1.1rem;font-weight:600}.tool-category>p{color:var(--text-muted);font-size:.85rem;margin-bottom:1rem}.tool-options{display:flex;flex-direction:column;gap:.75rem}.tool-option-button{background:var(--bg-secondary);border:2px solid var(--border-color);padding:1rem;border-radius:12px;cursor:pointer;transition:all .3s ease;text-align:left;font-family:Poppins,sans-serif}.tool-option-button:hover{border-color:var(--lavender);transform:translateY(-1px);box-shadow:0 4px 15px var(--shadow-light)}.tool-name{display:block;color:var(--text-primary);font-weight:600;font-size:.95rem;margin-bottom:.25rem}.tool-desc{display:block;color:var(--text-muted);font-size:.8rem;line-height:1.3}.tool-active{max-width:100%}.tool-header{text-align:center;margin-bottom:1.5rem;padding:1rem;background:var(--bg-tertiary);border-radius:12px;border:1px solid var(--border-color)}.tool-header h3{color:var(--text-primary);margin-bottom:.5rem;font-size:1.2rem;font-weight:600}.tool-description{color:var(--text-muted);font-size:.9rem;margin-bottom:.75rem}.step-indicator{background:var(--lavender);color:#fff;padding:.25rem .75rem;border-radius:12px;font-size:.8rem;font-weight:500;display:inline-block}.tool-content{margin-bottom:1.5rem}.step-instruction{background:var(--bg-secondary);padding:1rem;border-radius:12px;border:1px solid var(--border-color);margin-bottom:1rem}.step-instruction p{color:var(--text-primary);font-size:.95rem;line-height:1.5}.step-interaction{background:var(--bg-tertiary);padding:1rem;border-radius:12px;border:1px solid var(--border-color)}.step-prompt{color:var(--text-secondary);font-size:.9rem;margin-bottom:.75rem;font-style:italic}.response-input{width:100%;padding:.75rem;border:2px solid var(--border-color);border-radius:10px;background:var(--bg-secondary);color:var(--text-primary);font-family:Poppins,sans-serif;font-size:.85rem;resize:vertical;transition:border-color .3s ease;margin-bottom:.5rem}.response-input:focus{outline:none;border-color:var(--lavender)}.input-note{color:var(--text-muted);font-size:.75rem;font-style:italic}.tool-actions{display:flex;gap:.75rem;justify-content:center}.primary-action{background:var(--gradient-primary);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:20px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif}.primary-action:hover{transform:translateY(-2px);box-shadow:0 4px 15px var(--shadow-medium)}.secondary-action{background:var(--bg-tertiary);color:var(--text-secondary);border:2px solid var(--border-color);padding:.75rem 1.5rem;border-radius:20px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .3s ease;font-family:Poppins,sans-serif}.secondary-action:hover{border-color:var(--lavender);transform:translateY(-1px)}.tool-completion{text-align:center;padding:2rem 1rem}.completion-icon{font-size:3rem;margin-bottom:1rem}.tool-completion h3{color:var(--text-primary);margin-bottom:1rem;font-size:1.3rem;font-weight:600}.completion-message{color:var(--text-secondary);font-size:1rem;line-height:1.5;margin-bottom:1.5rem}.cbt-prompt{background:var(--bg-secondary);padding:1.25rem;border-radius:12px;border:1px solid var(--border-color)}.prompt-question{color:var(--text-primary);font-size:1rem;font-weight:500;margin-bottom:1rem;line-height:1.4}.sensory-suggestions{background:var(--bg-secondary);padding:1.25rem;border-radius:12px;border:1px solid var(--border-color)}.suggestions-intro{color:var(--text-primary);font-size:.95rem;margin-bottom:1rem;font-weight:500}.suggestion-list{list-style:none;margin-bottom:1rem}.suggestion-item{color:var(--text-secondary);font-size:.9rem;line-height:1.5;margin-bottom:.5rem;padding-left:.5rem}.sensory-note{color:var(--text-muted);font-size:.85rem;font-style:italic;line-height:1.4;padding:.75rem;background:var(--bg-tertiary);border-radius:8px;border:1px solid var(--border-color)}.toast{position:fixed;top:15px;right:15px;background:var(--bg-secondary);border:2px solid var(--soft-green);border-radius:14px;padding:.75rem 1rem;box-shadow:0 8px 25px var(--shadow-medium);transform:translate(100%);transition:all .4s cubic-bezier(.68,-.55,.265,1.55);z-index:1000;max-width:300px}.toast.visible{transform:translate(0)}.toast.tip{border-color:var(--lavender)}.toast.support{border-color:var(--soft-pink)}.toast.celebration{border-color:var(--teal);background:var(--gradient-primary);color:#fff}.toast-content{display:flex;align-items:center;gap:.5rem}.toast-icon{font-size:1.1rem}.toast-message{color:var(--text-primary);font-weight:500;font-size:.85rem;line-height:1.3}.toast.celebration .toast-message{color:#fff}@media (min-width: 1024px){.app{max-width:440px;margin:0 auto}.app-content{padding:1.25rem;max-height:calc(100vh - 130px)}.calendar-grid{gap:.5rem}.calendar-day{min-height:90px;padding:.625rem .5rem}.mood-indicator{width:30px;height:30px;font-size:1.15rem}.energy-indicator{width:22px;height:22px;font-size:.75rem}.tasks-container{gap:.625rem}.task-card{padding:1.125rem}.mood-grid{gap:.875rem}.mood-button{padding:1.125rem}}@media (max-width: 480px){.app{max-width:100%}.app-header{padding:1rem 1rem .75rem}.app-header h1{font-size:1.5rem}.app-content{padding:.75rem;max-height:calc(100vh - 120px)}.mood-grid{grid-template-columns:repeat(2,1fr);gap:.5rem}.mood-button{padding:.75rem}.breathing-circle{width:120px;height:120px}.breathing-animation{width:90px;height:90px}.toast{right:10px;left:10px;max-width:none}.energy-grid{grid-template-columns:repeat(3,1fr)}.sensory-grid{grid-template-columns:1fr}.chat-messages{max-height:200px}.transition-content{margin:.5rem;padding:1rem}.calendar-grid{grid-template-columns:repeat(7,1fr);gap:.25rem}.calendar-day{padding:.375rem .25rem;min-height:70px}.day-name{font-size:.6rem}.day-date{font-size:.65rem}.mood-indicator{width:22px;height:22px;font-size:.95rem}.energy-indicator{width:18px;height:18px;font-size:.65rem}.insights-grid{grid-template-columns:1fr;gap:.5rem}.week-navigation{flex-direction:column;gap:.5rem}.week-nav-button{padding:.375rem .75rem;font-size:.75rem}.tab-button{font-size:.65rem;padding:.5rem .25rem}.calendar-header h2{font-size:1.2rem}.weekly-insights{padding:.75rem}.pattern-card{padding:.5rem}.tool-categories{gap:1rem}.tool-category{padding:1rem}.tool-actions{flex-direction:column;align-items:stretch}.primary-action,.secondary-action{width:100%;text-align:center}}@media (prefers-reduced-motion: reduce){.breathing-animation,.celebration,.sound-status,.progress-fill:after,.completion-icon,.typing-indicator span{animation:none}.task-card:hover,.mood-button:hover,.sound-button:hover,.theme-toggle:hover,.energy-button:hover,.sensory-button:hover{transform:none}.toast{transition:opacity .3s ease}}.tab-button:focus,.task-checkbox:focus+.checkmark,.mood-button:focus,.sound-button:focus,.theme-toggle:focus,.energy-button:focus,.sensory-button:focus,.chat-input:focus,.reflection-input:focus,.send-button:focus,.transition-close:focus,.week-nav-button:focus,.therapist-report-button:focus{outline:2px solid var(--lavender);outline-offset:2px}@media (prefers-contrast: high){.task-card,.mood-button,.energy-button,.sensory-button,.calendar-day,.checkmark{border-width:3px}}
